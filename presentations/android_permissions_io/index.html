<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Android App Permissions</title>
    <!-- <meta name="description" content="A framework for easily creating beautiful presentations using HTML"> -->
    <meta name="author" content="Seth Clark">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="../../libs/revealjs/css/reveal.css">
    <link rel="stylesheet" href="../../libs/revealjs/css/theme/black.css" id="theme">
    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="../../libs/revealjs/lib/css/monokai_sublime.css">
    <!-- Printing and PDF exports -->
    <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? '../../libs/revealjs/css/print/pdf.css' : '../../libs/revealjs/css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
    </script>
    <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
</head>

<body>
    <div class="reveal">
        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section>
                <h1>Android 'M' App Permissions</h1>
                <!-- <h3><a href="https://docs.google.com/forms/d/17RK2nQWeV3wDpUOWjLvGrxRjkPByXqXZCvOv8W-gk8s/viewform?entry_385327315=GDG%20Charlotte">Meeting Survey</a> -->
                <p>
                    <small>Created by <a href="https://github.com/setheclark">Seth Clark</a> / <a href="https://plus.google.com/u/0/+SethClarkDev/posts">+Seth</a></small>
                </p>
            </section>
            <section>
                <section>
                    <h2>What's changed?</h2>
                    <p class="fragment">From Install-Time to Runtime</p>
                </section>
                <section>
                    <table style="width:100%">
                        <tr>
                            <th>Install Time</th>
                            <th>Runtime</th>
                        </tr>
                        <tr>
                            <td><img width="60%" height="50%" data-src="images/fb_install_permissions.png"></td>
                            <td><img width="60%" height="50%" data-src="images/runtime_permissions.png"></td>
                        </tr>
                    </table>
                </section>
                <section>
                    <h3>Which permissions need to be requested?</h3>
                    <ul class="fragment">
                        <li>Calendar</li>
                        <li>Camera</li>
                        <li>Contacts</li>
                        <li>Location</li>
                        <li>Microphone</li>
                        <li>Phone</li>
                        <li>SMS</li>
                        <li>Sensors</li>
                        </br>
                        <li class="fragment">Custom Permissions</li>
                    </ul>
                </section>
            </section>
            <section>
                <section>
                    <h2>How does this effect me when planning my app?</h2>
                </section>
                <section>
                    <ul>
                        <li>
                            <p class="fragment">More freedom to request new permissions</p>
                        </li>
                        <li>
                            <p class="fragment">Defer permission requests until needed</p>
                        </li>
                        <li>
                            <p class="fragment">Recover gracefully from permission denial
                                <ul>
                                    <li>
                                        <p class="fragment">Provided degraded/altered experience or disable feature?</p>
                                    </li>
                                </ul>
                            </p>
                        </li>
                        <li>
                            <p class="fragment">Block app when important permissions aren't granted</p>
                        </li>
                    </ul>
                </section>
                <section>
                    <h3>Request with care</h3>
                    <table width="100%">
                        <tr>
                            <th>First Request</th>
                            <th>Second Request</th>
                        </tr>
                        <tr>
                            <td><img data-src="images/first_request.png" /></td>
                            <td><img data-src="images/second_request.png" /></td>
                        </tr>
                    </table>
                </section>
            </section>
            <section>
                <section>
                    <h2>How does this effect me when developing my app?</h2>
                </section>
                <section>
                    <h3>Check if you have permission first</h3>
                    <pre class="fragment"><code class="java">
if(checkSelfPermission(Manifest.permission.READ_CONTACTS) 
     != PackageManager.PERMISSION_GRANTED) {
     //Oh No!
}
            </code></pre>
                </section>
                <section>
                    <h3>Request permission</h3>
                    <pre class="fragment"><code class="java">
//From my activity
requestPermissions(new String[]{Manifect.permission.READ_CONTACT},
     PERMISSION_REQUEST_ID);
            </code></pre>
                </section>
                <section>
                    <h3>Handle the users result</h3>
                    <pre class="fragment"><code class="java">
//From my activity
@Override
public void onRequestPermissionsResult(int requestCode, 
     String[] permissions, int[] grantResults) {
     if(grantResults[0] == PackageManager.PERMISSION_GRANTED) {
        //Whoop whoop!
     } else {
        //Ah shucks!
     }
}
                    </code></pre>
                </section>
                <section>
                    <p>Keep in mind, you must check everytime.</p>
                    <p>The user at any point could revoke any previously granted permission</p>
                </section>
                <section>
                    <h3>Other options?</h3>
                    <p class="fragment" data-fragment-index="1">Use Intents instead</p>
                    <p class="fragment" data-fragment-index="2">Instead of:
                        <pre class="fragment" data-fragment-index="2"><code class="java">
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:1238675309"));
startActivity(intent);
                </code></pre>
                    </p>
                    <p class="fragment" data-fragment-index="3">Consider:
                        <pre class="fragment" data-fragment-index="3"><code class="java">
Intent intent = new Intent(Intent.ACTION_DIAL);
intent.setData(Uri.parse("tel:1238675309"));
startActivity(intent);
                </code></pre>
                    </p>
                </section>
            </section>
            <section>
                <section>
                    <h2>What if my app doesn't target 'M?'</h2>
                </section>
                <section>
                    <p>Users running 'M' can still revoke permissions; however, they'll be warned that the app might not run correctly</p>
                    <img class="fragment" width="40%" height="40%" data-src="images/old_app.png">
                </section>
                <section>
                    <p>If the user revokes a permission for an older app the app will not crash due to a SecurityException, but Android will instead try to return appropriately empty data.</p>
                </section>
            </section>
            <section>
                <section>
                    <h2>What about apps that target 'M' installed on pre-M devices?</h2>
                </section>
                <section>
                    <img width="40%" height="40%" data-src="images/fb_install_permissions.png">
                </section>
            </section>
            <section>
                <h1>Questions?</h1>
            </section>
        </div>
    </div>
    <script src="../../libs/revealjs/lib/js/head.min.js"></script>
    <script src="../../libs/revealjs/js/reveal.js"></script>
    <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [{
            src: '../../libs/revealjs/lib/js/classList.js',
            condition: function() {
                return !document.body.classList;
            }
        }, {
            src: '../../libs/revealjs/plugin/markdown/marked.js',
            condition: function() {
                return !!document.querySelector('[data-markdown]');
            }
        }, {
            src: '../../libs/revealjs/plugin/markdown/markdown.js',
            condition: function() {
                return !!document.querySelector('[data-markdown]');
            }
        }, {
            src: '../../libs/revealjs/plugin/highlight/highlight.js',
            async: true,
            condition: function() {
                return !!document.querySelector('pre code');
            },
            callback: function() {
                hljs.initHighlightingOnLoad();
            }
        }, {
            src: '../../libs/revealjs/plugin/zoom-js/zoom.js',
            async: true
        }, {
            src: '../../libs/revealjs/plugin/notes/notes.js',
            async: true
        }]
    });
    </script>
</body>

</html>
